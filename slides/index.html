.right{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.pill{background:#f6f6f6;border:1px solid #e7e7e7;border-radius:99px;padding:6px 10px}
.ok{color:#0a9a00}.err{color:#b00020}
    .divider{height:1px;background:#eee;margin:12px 0}
    .hint{font-size:12px;color:#666}
</style>
</head>
<body>
<div class="topbar">
<div class="left">
      <h1>Quáº£n lÃ½ thÆ° má»¥c <code>slides/</code></h1>
      <h1>Quáº£n lÃ½ <code>slides/</code></h1>
<span id="count" class="pill muted">0 áº£nh</span>
</div>
<div class="right">
<button id="btnRefresh" class="btn">â†» Táº£i láº¡i</button>
      <button id="btnRebuild" class="btn">ğŸ›  Rebuild manifest</button>
<span id="msgTop" class="muted"></span>
</div>
</div>
@@ -49,7 +46,9 @@ <h1>Quáº£n lÃ½ thÆ° má»¥c <code>slides/</code></h1>
<button id="btnUpload" class="btn primary">â¬†ï¸ Táº£i áº£nh lÃªn</button>
<span id="msgUp" class="muted"></span>
</div>
    <div class="hint">TÃªn file sáº½ Ä‘Æ°á»£c giá»¯ nguyÃªn (Ä‘Æ°á»£c lÃ m sáº¡ch kÃ½ tá»±). Náº¿u trÃ¹ng sáº½ tá»± thÃªm háº­u tá»‘ <code>-1</code>, <code>-2</code>â€¦</div>
    <div class="muted" style="font-size:13px">
      TÃªn file giá»¯ nguyÃªn (Ä‘Æ°á»£c lÃ m sáº¡ch kÃ½ tá»±). Náº¿u trÃ¹ng sáº½ tá»± thÃªm háº­u tá»‘ <code>-1</code>, <code>-2</code> â€¦
    </div>
</div>

<div id="list" class="grid"></div>
@@ -86,11 +85,16 @@ <h1>Quáº£n lÃ½ thÆ° má»¥c <code>slides/</code></h1>

async function load() {
msgTop.textContent = 'Äang táº£i...';
    const data = await api('/api/files');
    listEl.innerHTML = data.items.map(tileTemplate).join('');
    countEl.textContent = `${data.items.length} áº£nh`;
    msgTop.textContent = '';
    bindTileEvents();
    try{
      const data = await api('/api/files');
      listEl.innerHTML = data.items.map(tileTemplate).join('');
      countEl.textContent = `${data.items.length} áº£nh`;
      msgTop.textContent = '';
      bindTileEvents();
    }catch(e){
      msgTop.textContent = 'âœ– ' + e.message;
      msgTop.className = 'err';
    }
}

function bindTileEvents(){
@@ -109,7 +113,7 @@ <h1>Quáº£n lÃ½ thÆ° má»¥c <code>slides/</code></h1>
headers:{'Content-Type':'application/json'},
body: JSON.stringify({ path })
});
          msgTop.textContent = `âœ” ÄÃ£ xÃ³a ${res.removed} file. Manifest cáº­p nháº­t: ${res.manifestCount} má»¥c`;
          msgTop.textContent = `âœ” ÄÃ£ xÃ³a. Manifest hiá»‡n ${res.manifestCount} má»¥c`;
msgTop.className='ok';
await load();
}catch(e){
@@ -129,7 +133,7 @@ <h1>Quáº£n lÃ½ thÆ° má»¥c <code>slides/</code></h1>
headers:{'Content-Type':'application/json'},
body: JSON.stringify({ old_path: path, new_name: newName })
});
          msgTop.textContent = `âœ” ÄÃ£ Ä‘á»•i tÃªn. Manifest cáº­p nháº­t: ${res.manifestCount} má»¥c`;
          msgTop.textContent = `âœ” ÄÃ£ Ä‘á»•i tÃªn. Manifest hiá»‡n ${res.manifestCount} má»¥c`;
msgTop.className='ok';
await load();
}catch(e){
@@ -160,16 +164,6 @@ <h1>Quáº£n lÃ½ thÆ° má»¥c <code>slides/</code></h1>

$('#btnRefresh').onclick = load;

  $('#btnRebuild').onclick = async () => {
    try{
      const res = await api('/api/manifest', { method:'POST' });
      msgTop.textContent = `âœ” Rebuild manifest xong: ${res.manifestCount} má»¥c`;
      msgTop.className='ok';
    }catch(e){
      alert(e.message);
    }
  };

load();
</script>
</body>
